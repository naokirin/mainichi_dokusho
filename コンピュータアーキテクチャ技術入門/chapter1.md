# 1.1 コンピュータシステムの基本

## コンピュータシステムの構造

* 命令: 四則演算やロード・ストア、条件分岐などの操作
* データ: 命令によって処理されるもの
* プログラム: 実行する順に命令を並べたもの
* メモリ: プログラムやデータを記憶する記憶装置
* プロセッサ: メモリに記憶されたプログラムを理解して処理を実行するもの
  - CPU（中央演算装置）

#### ビット、バイト、ワード

* ビット: 2進数で表されたデータの各桁の1つ
* 8ビット = 1バイト
* 2バイト = ハーフワード（Intelではワード）
* 4バイト = ワード（Intelではダブルワード）
* 8バイト = ダブルワード（Intelではクワッドワード）

### 命令セットアーキテクチャ

#### 命令セットアーキテクチャ

* プロセッサの持つ命令群、命令のデータ表現、命令実行時の結果の定義のこと
* Instruction Set Architecture, ISA と呼ばれる
* 命令セットアーキテクチャは上位互換で拡張される
  - 過去のプログラムが動かなくなるといったことを防ぐため

#### 有名なISA

* Intel 64 ISA
* AMD64 ISA
* ARMv8 ISA
* Intel 64 ISA と AMD64 ISA は大部分が同じでOSが差異を埋めている部分以外はバイナリ互換
* ARMv8 ISA は Intel 64 ISA と AMD64 ISA とはバイナリ非互換

### メモリ

* 1ビットを記憶するメモリセルの集まり
* バイト単位でアドレスがつけられている

### 入出力装置とプロセッサとの接続

* 標準インターフェースの PCI Express や USB などで接続する
* SoC（System on Chip）の場合は汎用性よりは直接接続ができるようになっている


# 1.2 プロセッサの基礎

## プロセッサの命令のステップの例

* RISCの命令パイプライン ([Wikipedia](https://ja.wikipedia.org/wiki/%E5%91%BD%E4%BB%A4%E3%83%91%E3%82%A4%E3%83%97%E3%83%A9%E3%82%A4%E3%83%B3)）
  1. IF（Instruction Fetch）: 命令読み出し
  2. DE（DEcode）: 命令解釈
  3. OP（OPerand read）: 演算データの読み出し
  4. EX（EXecute）: 演算の実行
  5. WB（Write Back）: 演算結果のメモリへの書き出し

## サイクルタイムとクロック周波数

* サイクルタイム: 各ステップの中で最も長く時間がかかるステップの実行時間
* クロック周波数: サイクルタイムの逆数
* 各ステップは同程度の時間で実行できるようにプロセッサのハードウェアを作る

## パイプライン処理

* パイプライン処理
  - 各命令を各ステージ単位で並列化して処理することでプロセッサの性能を向上するための技術
![](https://upload.wikimedia.org/wikipedia/commons/6/67/5_Stage_Pipeline.svg)

## メモリの階層構造

* メモリアクセスの時間がプロセッサのサイクルタイムの下限となる場合がある
* メモリアクセスの時間が1サイクル程度でアクセスできる容量の少ないメモリ、数〜数十サイクル程度でアクセスできる容量のある程度大きなメモリなどに分けることで、アクセス頻度の高いデータは素早くアクセスできるようにメモリは構造化されている
* メモリレジスタ: プロセッサから1サイクル程度でアクセスできる小容量メモリ
* 1次キャッシュメモリ: 数サイクル程度でアクセスできる4〜64KiBのメモリ
* 2次キャッシュメモリ: 10〜20サイクル程度でアクセスできる数百KiB〜数MiBのメモリ
* メインメモリ: 数百サイクル程度でアクセスできる数GiBのメモリ
